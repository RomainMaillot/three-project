{"id":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","dependencies":[{"name":"/Applications/Cours/H2/dev/three-project/package.json","includedInParent":true,"mtime":1548164082730},{"name":"/Applications/Cours/H2/dev/three-project/node_modules/postprocessing/package.json","includedInParent":true,"mtime":1548164412950},{"name":"three","loc":{"line":1,"column":59},"parent":"/Applications/Cours/H2/dev/three-project/node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","resolved":"/Applications/Cours/H2/dev/three-project/node_modules/three/build/three.module.js"}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DepthComparisonMaterial = void 0;\n\nvar _three = require(\"three\");\n\nconst fragment = \"#include <packing>\\r\\n#include <clipping_planes_pars_fragment>\\r\\n\\r\\nuniform sampler2D depthBuffer;\\r\\nuniform float cameraNear;\\r\\nuniform float cameraFar;\\r\\n\\r\\nvarying float vViewZ;\\r\\nvarying vec4 vProjTexCoord;\\r\\n\\r\\nvoid main() {\\r\\n\\r\\n\\t#include <clipping_planes_fragment>\\r\\n\\r\\n\\t// Transform into Cartesian coordinate (not mirrored).\\r\\n\\tvec2 projTexCoord = (vProjTexCoord.xy / vProjTexCoord.w) * 0.5 + 0.5;\\r\\n\\tprojTexCoord = clamp(projTexCoord, 0.002, 0.998);\\r\\n\\r\\n\\tfloat fragCoordZ = unpackRGBAToDepth(texture2D(depthBuffer, projTexCoord));\\r\\n\\r\\n\\t#ifdef PERSPECTIVE_CAMERA\\r\\n\\r\\n\\t\\tfloat viewZ = perspectiveDepthToViewZ(fragCoordZ, cameraNear, cameraFar);\\r\\n\\r\\n\\t#else\\r\\n\\r\\n\\t\\tfloat viewZ = orthographicDepthToViewZ(fragCoordZ, cameraNear, cameraFar);\\r\\n\\r\\n\\t#endif\\r\\n\\r\\n\\tfloat depthTest = (-vViewZ > -viewZ) ? 1.0 : 0.0;\\r\\n\\r\\n\\tgl_FragColor.rgb = vec3(0.0, depthTest, 1.0);\\r\\n\\r\\n}\\r\\n\";\nconst vertex = \"#include <common>\\r\\n#include <morphtarget_pars_vertex>\\r\\n#include <skinning_pars_vertex>\\r\\n#include <clipping_planes_pars_vertex>\\r\\n\\r\\nvarying float vViewZ;\\r\\nvarying vec4 vProjTexCoord;\\r\\n\\r\\nvoid main() {\\r\\n\\r\\n\\t#include <skinbase_vertex>\\r\\n\\r\\n\\t#include <begin_vertex>\\r\\n\\t#include <morphtarget_vertex>\\r\\n\\t#include <skinning_vertex>\\r\\n\\t#include <project_vertex>\\r\\n\\r\\n\\tvViewZ = mvPosition.z;\\r\\n\\tvProjTexCoord = gl_Position;\\r\\n\\r\\n\\t#include <clipping_planes_vertex>\\r\\n\\r\\n}\\r\\n\";\n/**\r\n * A depth comparison shader material.\r\n */\n\nclass DepthComparisonMaterial extends _three.ShaderMaterial {\n  /**\r\n   * Constructs a new depth comparison material.\r\n   *\r\n   * @param {Texture} [depthTexture=null] - A depth texture.\r\n   * @param {PerspectiveCamera} [camera] - A camera.\r\n   */\n  constructor(depthTexture = null, camera) {\n    super({\n      type: \"DepthComparisonMaterial\",\n      uniforms: {\n        depthBuffer: new _three.Uniform(depthTexture),\n        cameraNear: new _three.Uniform(0.3),\n        cameraFar: new _three.Uniform(1000)\n      },\n      fragmentShader: fragment,\n      vertexShader: vertex,\n      depthWrite: false,\n      depthTest: false,\n      morphTargets: true,\n      skinning: true\n    });\n    this.adoptCameraSettings(camera);\n  }\n  /**\r\n   * Adopts the settings of the given camera.\r\n   *\r\n   * @param {Camera} [camera=null] - A camera.\r\n   */\n\n\n  adoptCameraSettings(camera = null) {\n    if (camera !== null) {\n      this.uniforms.cameraNear.value = camera.near;\n      this.uniforms.cameraFar.value = camera.far;\n\n      if (camera instanceof _three.PerspectiveCamera) {\n        this.defines.PERSPECTIVE_CAMERA = \"1\";\n      } else {\n        delete this.defines.PERSPECTIVE_CAMERA;\n      }\n    }\n  }\n\n}\n\nexports.DepthComparisonMaterial = DepthComparisonMaterial;","map":{"mappings":[{"generated":{"line":8,"column":0},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":1,"column":0}},{"generated":{"line":10,"column":0},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":3,"column":0}},{"name":"fragment","generated":{"line":10,"column":6},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":3,"column":6}},{"generated":{"line":10,"column":14},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":3,"column":14}},{"generated":{"line":10,"column":17},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":3,"column":17}},{"generated":{"line":10,"column":945},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":3,"column":0}},{"generated":{"line":11,"column":0},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":4,"column":0}},{"name":"vertex","generated":{"line":11,"column":6},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":4,"column":6}},{"generated":{"line":11,"column":12},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":4,"column":12}},{"generated":{"line":11,"column":15},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":4,"column":15}},{"generated":{"line":11,"column":519},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":4,"column":0}},{"generated":{"line":12,"column":0},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":6,"column":0}},{"generated":{"line":16,"column":0},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":10,"column":7}},{"name":"DepthComparisonMaterial","generated":{"line":16,"column":6},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":10,"column":13}},{"generated":{"line":16,"column":29},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":10,"column":7}},{"name":"ShaderMaterial","generated":{"line":16,"column":38},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":10,"column":45}},{"generated":{"line":16,"column":59},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":10,"column":7}},{"generated":{"line":16,"column":60},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":10,"column":60}},{"generated":{"line":17,"column":0},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":12,"column":1}},{"name":"constructor","generated":{"line":23,"column":0},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":19,"column":1}},{"name":"constructor","generated":{"line":23,"column":2},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":19,"column":1}},{"generated":{"line":23,"column":13},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":19,"column":12}},{"name":"depthTexture","generated":{"line":23,"column":14},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":19,"column":13}},{"generated":{"line":23,"column":26},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":19,"column":25}},{"generated":{"line":23,"column":29},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":19,"column":28}},{"generated":{"line":23,"column":33},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":19,"column":12}},{"name":"camera","generated":{"line":23,"column":35},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":19,"column":34}},{"generated":{"line":23,"column":41},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":19,"column":12}},{"generated":{"line":23,"column":43},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":19,"column":42}},{"generated":{"line":24,"column":0},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":21,"column":2}},{"generated":{"line":24,"column":10},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":21,"column":8}},{"name":"type","generated":{"line":25,"column":0},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":23,"column":3}},{"name":"type","generated":{"line":25,"column":6},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":23,"column":3}},{"generated":{"line":25,"column":10},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":23,"column":7}},{"generated":{"line":25,"column":12},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":23,"column":9}},{"generated":{"line":25,"column":37},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":21,"column":8}},{"name":"uniforms","generated":{"line":26,"column":0},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":25,"column":3}},{"name":"uniforms","generated":{"line":26,"column":6},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":25,"column":3}},{"generated":{"line":26,"column":14},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":25,"column":11}},{"generated":{"line":26,"column":16},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":25,"column":13}},{"name":"depthBuffer","generated":{"line":27,"column":0},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":27,"column":4}},{"name":"depthBuffer","generated":{"line":27,"column":8},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":27,"column":4}},{"generated":{"line":27,"column":19},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":27,"column":15}},{"generated":{"line":27,"column":21},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":27,"column":17}},{"name":"Uniform","generated":{"line":27,"column":25},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":27,"column":21}},{"generated":{"line":27,"column":39},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":27,"column":17}},{"name":"depthTexture","generated":{"line":27,"column":40},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":27,"column":29}},{"generated":{"line":27,"column":52},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":27,"column":17}},{"generated":{"line":27,"column":53},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":25,"column":13}},{"name":"cameraNear","generated":{"line":28,"column":0},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":28,"column":4}},{"name":"cameraNear","generated":{"line":28,"column":8},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":28,"column":4}},{"generated":{"line":28,"column":18},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":28,"column":14}},{"generated":{"line":28,"column":20},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":28,"column":16}},{"name":"Uniform","generated":{"line":28,"column":24},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":28,"column":20}},{"generated":{"line":28,"column":38},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":28,"column":16}},{"generated":{"line":28,"column":39},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":28,"column":28}},{"generated":{"line":28,"column":42},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":28,"column":16}},{"generated":{"line":28,"column":43},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":25,"column":13}},{"name":"cameraFar","generated":{"line":29,"column":0},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":29,"column":4}},{"name":"cameraFar","generated":{"line":29,"column":8},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":29,"column":4}},{"generated":{"line":29,"column":17},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":29,"column":13}},{"generated":{"line":29,"column":19},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":29,"column":15}},{"name":"Uniform","generated":{"line":29,"column":23},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":29,"column":19}},{"generated":{"line":29,"column":37},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":29,"column":15}},{"generated":{"line":29,"column":38},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":29,"column":27}},{"generated":{"line":29,"column":42},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":29,"column":15}},{"generated":{"line":30,"column":0},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":25,"column":13}},{"generated":{"line":30,"column":7},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":21,"column":8}},{"name":"fragmentShader","generated":{"line":31,"column":0},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":33,"column":3}},{"name":"fragmentShader","generated":{"line":31,"column":6},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":33,"column":3}},{"generated":{"line":31,"column":20},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":33,"column":17}},{"name":"fragment","generated":{"line":31,"column":22},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":33,"column":19}},{"generated":{"line":31,"column":30},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":21,"column":8}},{"name":"vertexShader","generated":{"line":32,"column":0},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":34,"column":3}},{"name":"vertexShader","generated":{"line":32,"column":6},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":34,"column":3}},{"generated":{"line":32,"column":18},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":34,"column":15}},{"name":"vertex","generated":{"line":32,"column":20},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":34,"column":17}},{"generated":{"line":32,"column":26},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":21,"column":8}},{"name":"depthWrite","generated":{"line":33,"column":0},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":36,"column":3}},{"name":"depthWrite","generated":{"line":33,"column":6},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":36,"column":3}},{"generated":{"line":33,"column":16},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":36,"column":13}},{"generated":{"line":33,"column":18},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":36,"column":15}},{"generated":{"line":33,"column":23},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":21,"column":8}},{"name":"depthTest","generated":{"line":34,"column":0},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":37,"column":3}},{"name":"depthTest","generated":{"line":34,"column":6},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":37,"column":3}},{"generated":{"line":34,"column":15},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":37,"column":12}},{"generated":{"line":34,"column":17},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":37,"column":14}},{"generated":{"line":34,"column":22},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":21,"column":8}},{"name":"morphTargets","generated":{"line":35,"column":0},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":39,"column":3}},{"name":"morphTargets","generated":{"line":35,"column":6},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":39,"column":3}},{"generated":{"line":35,"column":18},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":39,"column":15}},{"generated":{"line":35,"column":20},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":39,"column":17}},{"generated":{"line":35,"column":24},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":21,"column":8}},{"name":"skinning","generated":{"line":36,"column":0},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":40,"column":3}},{"name":"skinning","generated":{"line":36,"column":6},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":40,"column":3}},{"generated":{"line":36,"column":14},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":40,"column":11}},{"generated":{"line":36,"column":16},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":40,"column":13}},{"generated":{"line":37,"column":0},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":21,"column":8}},{"generated":{"line":37,"column":5},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":21,"column":2}},{"generated":{"line":38,"column":0},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":44,"column":2}},{"name":"adoptCameraSettings","generated":{"line":38,"column":9},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":44,"column":7}},{"generated":{"line":38,"column":28},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":44,"column":2}},{"name":"camera","generated":{"line":38,"column":29},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":44,"column":27}},{"generated":{"line":38,"column":35},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":44,"column":2}},{"generated":{"line":39,"column":0},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":46,"column":2}},{"generated":{"line":40,"column":0},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":48,"column":1}},{"name":"adoptCameraSettings","generated":{"line":47,"column":0},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":54,"column":1}},{"name":"adoptCameraSettings","generated":{"line":47,"column":2},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":54,"column":1}},{"generated":{"line":47,"column":21},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":54,"column":20}},{"name":"camera","generated":{"line":47,"column":22},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":54,"column":21}},{"generated":{"line":47,"column":28},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":54,"column":27}},{"generated":{"line":47,"column":31},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":54,"column":30}},{"generated":{"line":47,"column":35},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":54,"column":20}},{"generated":{"line":47,"column":37},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":54,"column":36}},{"generated":{"line":48,"column":0},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":56,"column":2}},{"name":"camera","generated":{"line":48,"column":8},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":56,"column":5}},{"generated":{"line":48,"column":14},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":56,"column":11}},{"generated":{"line":48,"column":19},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":56,"column":16}},{"generated":{"line":48,"column":23},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":56,"column":2}},{"generated":{"line":48,"column":25},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":56,"column":22}},{"generated":{"line":49,"column":0},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":58,"column":3}},{"name":"uniforms","generated":{"line":49,"column":11},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":58,"column":8}},{"generated":{"line":49,"column":19},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":58,"column":3}},{"name":"cameraNear","generated":{"line":49,"column":20},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":58,"column":17}},{"generated":{"line":49,"column":30},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":58,"column":3}},{"name":"value","generated":{"line":49,"column":31},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":58,"column":28}},{"generated":{"line":49,"column":36},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":58,"column":3}},{"name":"camera","generated":{"line":49,"column":39},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":58,"column":36}},{"generated":{"line":49,"column":45},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":58,"column":42}},{"name":"near","generated":{"line":49,"column":46},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":58,"column":43}},{"generated":{"line":49,"column":50},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":58,"column":3}},{"generated":{"line":50,"column":0},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":59,"column":3}},{"name":"uniforms","generated":{"line":50,"column":11},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":59,"column":8}},{"generated":{"line":50,"column":19},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":59,"column":3}},{"name":"cameraFar","generated":{"line":50,"column":20},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":59,"column":17}},{"generated":{"line":50,"column":29},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":59,"column":3}},{"name":"value","generated":{"line":50,"column":30},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":59,"column":27}},{"generated":{"line":50,"column":35},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":59,"column":3}},{"name":"camera","generated":{"line":50,"column":38},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":59,"column":35}},{"generated":{"line":50,"column":44},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":59,"column":41}},{"name":"far","generated":{"line":50,"column":45},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":59,"column":42}},{"generated":{"line":50,"column":48},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":59,"column":3}},{"generated":{"line":52,"column":0},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":61,"column":3}},{"name":"camera","generated":{"line":52,"column":10},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":61,"column":6}},{"generated":{"line":52,"column":16},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":61,"column":12}},{"name":"PerspectiveCamera","generated":{"line":52,"column":28},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":61,"column":24}},{"generated":{"line":52,"column":52},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":61,"column":3}},{"generated":{"line":52,"column":54},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":61,"column":43}},{"generated":{"line":53,"column":0},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":63,"column":4}},{"name":"defines","generated":{"line":53,"column":13},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":63,"column":9}},{"generated":{"line":53,"column":20},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":63,"column":4}},{"name":"PERSPECTIVE_CAMERA","generated":{"line":53,"column":21},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":63,"column":17}},{"generated":{"line":53,"column":39},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":63,"column":4}},{"generated":{"line":53,"column":42},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":63,"column":38}},{"generated":{"line":53,"column":45},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":63,"column":4}},{"generated":{"line":54,"column":0},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":65,"column":4}},{"generated":{"line":54,"column":7},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":61,"column":3}},{"generated":{"line":54,"column":13},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":65,"column":10}},{"generated":{"line":55,"column":0},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":67,"column":4}},{"generated":{"line":55,"column":15},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":67,"column":11}},{"name":"defines","generated":{"line":55,"column":20},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":67,"column":16}},{"generated":{"line":55,"column":27},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":67,"column":11}},{"name":"PERSPECTIVE_CAMERA","generated":{"line":55,"column":28},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":67,"column":24}},{"generated":{"line":55,"column":46},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":67,"column":4}},{"generated":{"line":56,"column":0},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":69,"column":4}},{"generated":{"line":57,"column":0},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":71,"column":3}},{"generated":{"line":58,"column":0},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":73,"column":2}},{"generated":{"line":60,"column":0},"source":"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js","original":{"line":10,"column":60}}],"sources":{"../node_modules/postprocessing/src/materials/DepthComparisonMaterial.js":"import { PerspectiveCamera, ShaderMaterial, Uniform } from \"three\";\r\n\r\nconst fragment = \"#include <packing>\\r\\n#include <clipping_planes_pars_fragment>\\r\\n\\r\\nuniform sampler2D depthBuffer;\\r\\nuniform float cameraNear;\\r\\nuniform float cameraFar;\\r\\n\\r\\nvarying float vViewZ;\\r\\nvarying vec4 vProjTexCoord;\\r\\n\\r\\nvoid main() {\\r\\n\\r\\n\\t#include <clipping_planes_fragment>\\r\\n\\r\\n\\t// Transform into Cartesian coordinate (not mirrored).\\r\\n\\tvec2 projTexCoord = (vProjTexCoord.xy / vProjTexCoord.w) * 0.5 + 0.5;\\r\\n\\tprojTexCoord = clamp(projTexCoord, 0.002, 0.998);\\r\\n\\r\\n\\tfloat fragCoordZ = unpackRGBAToDepth(texture2D(depthBuffer, projTexCoord));\\r\\n\\r\\n\\t#ifdef PERSPECTIVE_CAMERA\\r\\n\\r\\n\\t\\tfloat viewZ = perspectiveDepthToViewZ(fragCoordZ, cameraNear, cameraFar);\\r\\n\\r\\n\\t#else\\r\\n\\r\\n\\t\\tfloat viewZ = orthographicDepthToViewZ(fragCoordZ, cameraNear, cameraFar);\\r\\n\\r\\n\\t#endif\\r\\n\\r\\n\\tfloat depthTest = (-vViewZ > -viewZ) ? 1.0 : 0.0;\\r\\n\\r\\n\\tgl_FragColor.rgb = vec3(0.0, depthTest, 1.0);\\r\\n\\r\\n}\\r\\n\";\r\nconst vertex = \"#include <common>\\r\\n#include <morphtarget_pars_vertex>\\r\\n#include <skinning_pars_vertex>\\r\\n#include <clipping_planes_pars_vertex>\\r\\n\\r\\nvarying float vViewZ;\\r\\nvarying vec4 vProjTexCoord;\\r\\n\\r\\nvoid main() {\\r\\n\\r\\n\\t#include <skinbase_vertex>\\r\\n\\r\\n\\t#include <begin_vertex>\\r\\n\\t#include <morphtarget_vertex>\\r\\n\\t#include <skinning_vertex>\\r\\n\\t#include <project_vertex>\\r\\n\\r\\n\\tvViewZ = mvPosition.z;\\r\\n\\tvProjTexCoord = gl_Position;\\r\\n\\r\\n\\t#include <clipping_planes_vertex>\\r\\n\\r\\n}\\r\\n\";\r\n\r\n/**\r\n * A depth comparison shader material.\r\n */\r\n\r\nexport class DepthComparisonMaterial extends ShaderMaterial {\r\n\r\n\t/**\r\n\t * Constructs a new depth comparison material.\r\n\t *\r\n\t * @param {Texture} [depthTexture=null] - A depth texture.\r\n\t * @param {PerspectiveCamera} [camera] - A camera.\r\n\t */\r\n\r\n\tconstructor(depthTexture = null, camera) {\r\n\r\n\t\tsuper({\r\n\r\n\t\t\ttype: \"DepthComparisonMaterial\",\r\n\r\n\t\t\tuniforms: {\r\n\r\n\t\t\t\tdepthBuffer: new Uniform(depthTexture),\r\n\t\t\t\tcameraNear: new Uniform(0.3),\r\n\t\t\t\tcameraFar: new Uniform(1000)\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfragmentShader: fragment,\r\n\t\t\tvertexShader: vertex,\r\n\r\n\t\t\tdepthWrite: false,\r\n\t\t\tdepthTest: false,\r\n\r\n\t\t\tmorphTargets: true,\r\n\t\t\tskinning: true\r\n\r\n\t\t});\r\n\r\n\t\tthis.adoptCameraSettings(camera);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Adopts the settings of the given camera.\r\n\t *\r\n\t * @param {Camera} [camera=null] - A camera.\r\n\t */\r\n\r\n\tadoptCameraSettings(camera = null) {\r\n\r\n\t\tif(camera !== null) {\r\n\r\n\t\t\tthis.uniforms.cameraNear.value = camera.near;\r\n\t\t\tthis.uniforms.cameraFar.value = camera.far;\r\n\r\n\t\t\tif(camera instanceof PerspectiveCamera) {\r\n\r\n\t\t\t\tthis.defines.PERSPECTIVE_CAMERA = \"1\";\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tdelete this.defines.PERSPECTIVE_CAMERA;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n"},"lineCount":null}},"hash":"2fbfe1020ec0487365bb321143c95015","cacheData":{"env":{}}}